{"version":3,"sources":["pages/detail/controller/actions.ts","pages/detail/index.tsx"],"names":["bindActionCreators","requestDetail","dispatch","getState","console","log","setTimeout","data","type","t","payload","store","Detail","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","skuid","onToNext","history","push","onToButton","setState","state","match","params","actions","prevProps","prevState","_this2","snapshot","react","onClick","React","connect","ownProps","detail"],"mappings":"qLAsBeA,cAAmB,CAC9BC,cAVkB,WAClB,OAAO,SAACC,EAAeC,GACnBC,QAAQC,IAAI,mBACZC,WAAW,WARG,IAACC,EASXL,GATWK,EASY,GATG,CAClCC,KAAMC,IACNC,QAASH,MAQF,QAMRI,IAAMT,UCZHU,cAEL,SAAAA,EAAYC,GAAe,IAAAC,EAAAC,OAAAC,EAAA,EAAAD,CAAAE,KAAAL,IAC1BE,EAAAC,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAAH,GAAAQ,KAAAH,KAAMJ,KAFPQ,WAC2B,EAAAP,EA4C3BQ,SAAW,WACUR,EAAKD,MAAjBU,QACAC,KAAK,iBA9CaV,EAgD3BW,WAAa,WACZX,EAAKO,MAAQ,MACbP,EAAKY,SAAS,CACbL,MAAO,SAjDRP,EAAKa,MAAQ,CACZN,MAAO,WAHkB,IAKlBO,EAAUd,EAAKD,MAAfe,MALkB,OAM1Bd,EAAKO,MAAQO,EAAMC,OAAOR,MAC1BjB,QAAQC,IAAI,qBAAsBS,EAAKO,OAPbP,mFAc1BV,QAAQC,IAAI,kBAAmBY,KAAKI,OACpCS,EAAQ7B,gEAKR,OADAG,QAAQC,IAAI,+BAAgCY,KAAKI,QAC1C,kDAEgBU,EAAmBC,GAAkB,IAAAC,EAAAhB,KAC5Db,QAAQC,IAAI,kBAAmBY,KAAKI,OADwB,IAGtDA,EADYJ,KAAKJ,MAAfe,MACYC,OAAOR,MAU3B,OATIJ,KAAKI,QAAUA,GAClBJ,KAAKS,SAAS,SAACM,EAAWnB,GAEzB,OADAoB,EAAKZ,MAAQA,EACN,CACNA,WAKI,gDAEWU,EAAmBC,EAAmBE,GACxD9B,QAAQC,IAAI,mEAIZD,QAAQC,IAAI,8BAA+BY,KAAKI,wCAchD,OADAjB,QAAQC,IAAI,gBAAiBY,KAAKI,OAEjCc,EAAA,yBACCA,EAAA,wBAAQC,QAASnB,KAAKK,UAAtB,wCAGAa,EAAA,yBACAA,EAAA,wBAAQC,QAASnB,KAAKQ,YAAtB,gDAICR,KAAKU,MAAMN,0DAzDiBR,EAAec,GAE9C,OADAvB,QAAQC,IAAI,kCAAmCQ,GACxC,YAbYwB,aAmFNC,sBARf,SAAyBX,EAAYY,GAAkB,IAC9CC,EAAWb,EAAXa,OAIR,OAHID,EAASC,OAGN,CAACA,WAG+B,KAAzBF,CAA+B1B","file":"static/js/21.00d3e71a.chunk.js","sourcesContent":["import { bindActionCreators } from 'redux'\nimport store from '@/store'\nimport * as t from './type'\n\n// const detail = () => ({\n//     type: t.DETAIL\n// })\n\nconst detailSuccess = (data: any) => ({\n    type: t.DETAIL_SUCCESS,\n    payload: data\n})\n\nconst requestDetail = () => {\n    return (dispatch: any, getState: any) => {\n        console.log(\"dispatch-detail\")\n        setTimeout(() => {\n            dispatch(detailSuccess({}))\n        }, 2000)\n    }\n}\n\nexport default bindActionCreators({\n    requestDetail\n}, store.dispatch)","import * as React from 'react'\nimport { connect } from 'react-redux'\nimport actions from './controller/actions'\n\ninterface IProps {\n\tmatch: any;\n\thistory: any;\n\tdetail: any\n}\ninterface IState {\n\tskuid: string;\n}\nclass Detail extends React.Component<IProps, IState> {\n\tskuid: any\n\tconstructor(props: IProps) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tskuid: 'default'\n\t\t};\n\t\tconst { match } = this.props\n\t\tthis.skuid = match.params.skuid\n\t\tconsole.log('constructor======>', this.skuid)\n\t}\n\tstatic getDerivedStateFromProps(props: IProps, state: IState) {\n\t\tconsole.log('getderivedstatefromprops======>', props)\n\t\treturn null\n\t}\n\tcomponentDidMount() {\n\t\tconsole.log('didMount======>', this.skuid)\n\t\tactions.requestDetail()\n\t}\n\n\tshouldComponentUpdate() {\n\t\tconsole.log('shouldComponentUpdate======>', this.skuid)\n\t\treturn true;\n\t}\n\tgetSnapshotBeforeUpdate(prevProps: IProps, prevState:IState) {\n\t\tconsole.log('snapshot======>', this.skuid)\n\t\tconst { match } = this.props\n\t\tconst skuid = match.params.skuid\n\t\tif (this.skuid !== skuid) {\n\t\t\tthis.setState((prevState, props) => {\n\t\t\t\tthis.skuid = skuid\n\t\t\t\treturn {\n\t\t\t\t\tskuid\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\n\t\treturn null\n\t}\n\tcomponentDidUpdate(prevProps: IProps, prevState: IState, snapshot: any) {\n\t\tconsole.log('didUpdate======>', )\n\t\t// 拿到skuid，可以更新页面\n\t}\n\tcomponentWillUnmount() {\n\t\tconsole.log('componentWillUnmount======>', this.skuid)\n\t}\n\tonToNext = () => {\n\t\tconst { history } = this.props\n\t\thistory.push('/detail/next')\n\t}\n\tonToButton = () => {\n\t\tthis.skuid = \"123\"\n\t\tthis.setState({\n\t\t\tskuid: \"123\"\n\t\t})\n\t}\n\trender(){\n\t\tconsole.log(\"render======>\", this.skuid)\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<button onClick={this.onToNext}>\n\t\t\t\t\t路由跳转重用\n\t\t\t\t</button>\n\t\t\t\t<br />\n\t\t\t\t<button onClick={this.onToButton}>\n\t\t\t\t\tsetState重用当前页面\n\t\t\t\t</button>\n\t\t\t\t{\n\t\t\t\t\tthis.state.skuid\n\t\t\t\t}\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nfunction mapStateToProps(state: any, ownProps: IProps) {\n\tconst { detail } = state\n\tif (ownProps.detail) {\n\t}\n\n\treturn {detail}\n}\n\nexport default connect(mapStateToProps, null)(Detail);"],"sourceRoot":""}